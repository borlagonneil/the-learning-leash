<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<link rel="stylesheet" href="style.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
		crossorigin="anonymous"></script>
	<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
	<title>Breeds - THE LEARNING LEASH</title>
</head>

<body>
	<nav class="navbar fixed-top px-4">
		<div class="container-fluid">
			<div>
				<button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
					data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" style="border: none">
					<span class="navbar-toggler-icon"></span>
				</button>
				<a class="navbar-brand ms-2 fontPoppins" href="#">THE LEARNING LEASH</a>
			</div>
			<form class="d-md-flex d-none" role="search">
				<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="search">
				<button class="btn btn-outline-secondary" type="submit">Search</button>
			</form>
			<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
				aria-labelledby="offcanvasNavbarLabel">
				<div class="offcanvas-header">
					<h5 class="offcanvas-title fontPoppins" id="offcanvasNavbarLabel">Menu</h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
						<li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
						<li class="nav-item"><a class="nav-link active" href="#">Breeds</a></li>
						<li class="nav-item"><a class="nav-link" href="nutrition.html">Nutritions</a></li>
						<li class="nav-item"><a class="nav-link" href="gears.html">Gears and Accessories</a></li>
						<li class="nav-item"><a class="nav-link" href="training.html">Training</a></li>
					</ul>
					<form class="d-flex d-md-none mt-3" role="search">
						<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"
							id="search">
						<button class="btn btn-outline-secondary" type="submit">Search</button>
					</form>
				</div>
			</div>
		</div>
	</nav>
	<div class="container-fluid px-5" x-data="{
		breedsList: [],
		dataReceived: false, 
		goToBreedPage,
		getBreedsList,
		openModal,
		showModal: false,
		breedModal: '',
		modalContent: {
			other: {
				image_link: ''
			}
		}
	}">
		<div class="d-flex justify-content-between mt-5 pt-5" x-init="fetch('breedModal.html')
		.then(response => response.text())
		.then(data => {
			breedModal = data;
		})
		.catch(error => {
			console.error('Error loading modal content:', error);
		});">
			<div class="d-flex fontPoppins">
				<img src="assets/icons/dog-bone.png" style="height: 50px;">
				<h2 class="mt-2 fw-bold">BREEDS</h1>
			</div>
			<div x-data="{letters: Array.from({ length: 25 }, (_, index) => index+1)}" class="d-flex mt-2">
				<template x-for="(btnText, index) in letters">
					<button class="btn me-0 me-1 my-0 py-0 px-1 btn-circle" x-on:click="goToBreedPage(index)">
						<p x-text="btnText" class="fs-5"></p>
					</button>
				</template>
			</div>
		</div>
		<div class="fontDMSans mt-3 mb-5 text-wrap" x-init="goToBreedPage(0)">
			Welcome to the "Breed" section of our website! Here, we invite you to explore and discover the fascinating
			world of dogs through a curated showcase of different breeds. Whether you're a dog enthusiast, a potential
			pet owner, or simply intrigued by the diversity of man's best friend, this section is designed to provide
			you with valuable insights and information about various dog breeds. Join us as we delve into the unique
			characteristics, histories, and personalities of these incredible canine companions. Get ready to embark on
			a journey that celebrates the wonderful world of dog breeds.
		</div>
		<div class="container-fluid row" style="margin: auto;">
			<template x-for="breed in breedsList">
				<div @click="openModal(breed)" class="card mb-3 col-6 cardContainer me-lg-2 me-0"
					style="border: none; background-color: #f4f4f4 !important;" x-show="dataReceived"
					data-bs-toggle="modal" data-bs-target="#breedModal">
					<div class="row g-0">
						<div class="col-md-6 mt-6">
							<img class="img-fluid rounded w-100" x-bind:src="breed.other.image_link"
								x:bind:alt="breed.other.image_link">
						</div>
						<div class="col-md-6">
							<div class="card-body">
								<h5 class="card-title fontPoppins fw-bold" x-text="breed.name"></h5>
								<p class="card-text text-wrap line-clamp fontDMSans" x-text="breed.description">
								</p>
							</div>
						</div>
					</div>
				</div>
			</template>
			<div class="container-fluid row" x-show="!dataReceived" style="height: 50vh;">
				<div class=" spinner-border" role="status"
					style="height: 40vh; width: 40vh; border-width: 15px; margin: auto;">
					<span class="visually-hidden">Loading...</span>
				</div>
			</div>
		</div>
		<div x-html="breedModal"></div>
	</div>
	<script>
		function getBreedsList(index) {
			this.dataReceived = false;
			this.breedsList = [];
			var apiKey = '8Ayr2QMWSu93nNeMc/c6TQ==oCU294t7ApTO9CCu';
			breeds = fetch(`https://dogapi.dog/api/v2/breeds?page[number]=${index + 1}`).then(response => response.json())
				.then(data => {
					for (const [y, x] of data.data.entries()) {
						var name = x.attributes.name;
						var url = 'https://api.api-ninjas.com/v1/dogs?name=' + name;
						let other;
						fetch(url, {
							method: 'GET',
							headers: {
								'X-Api-Key': apiKey,
								'Content-Type': 'application/json'
							}
						}).then(response => {
							if (!response.ok)
								throw new Error('Network response was not ok');
							return response.json();
						}).then(result => {
							this.breedsList.push({
								index: y,
								name: x.attributes.name,
								description: x.attributes.description,
								other: result[0]
							})
							this.breedsList.sort((a, b) => a.index - b.index);
						}).catch(error => {
							console.error('Error:', error);
						});
					}
				});
		}
		async function goToBreedPage(index) {
			let btnCircs = document.querySelectorAll('button.btn-circle');
			let btnSelected = btnCircs[index];
			for (const btn of btnCircs)
				btn.classList.remove('btn-circle-selected');
			btnSelected.classList.add('btn-circle-selected');
			this.getBreedsList(index);
			setTimeout(() => {
				this.dataReceived = true;
			}, 2000);
		}
		function openModal(data) {
			this.modalContent = data;
		}
	</script>
</body>


</html>
